{% load static i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>{% trans "Add questions" %} â€“ {{ test.title }}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<div class="phone">
    <div class="phone__top"></div>
    <div class="screen">

        <h1 class="form-title">{% trans "Add questions" %}</h1>
        <p class="small-text center">
            {% trans "Test" %}: <b>{{ test.title }}</b>
        </p>

        {% if questions %}
            <div class="tests-list" style="margin-top: 12px;">
                {% for q in questions %}
                    <div class="test-item">
                        <div class="test-name">
                            {{ forloop.counter }}. {{ q.question_text }}
                        </div>

                        <div class="test-meta">
                            {% for a in q.answers.all %}
                                <div>
                                    - {{ a.answer_text }}
                                    {% if a.is_correct %}
                                        ({% trans "correct" %})
                                    {% endif %}
                                </div>
                            {% empty %}
                                <div>- ({% trans "no answers yet" %})</div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="form-wrapper" style="margin-top: 16px;">
            {% csrf_token %}

            <div class="form-group">
                <label class="form-label">{% trans "Question" %}</label>
                <textarea name="question"
                          class="textarea-input"
                          placeholder="{% trans 'Type question here' %}"
                          required></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">{% trans "Answers (choose correct)" %}</label>

                <div class="answer-row-flex">
                    <input type="radio" name="correct" value="1" checked>
                    <input type="text"
                           name="answer1"
                           class="form-input"
                           placeholder="{% trans 'Answer 1' %}"
                           required>
                </div>

                <div class="answer-row-flex">
                    <input type="radio" name="correct" value="2">
                    <input type="text"
                           name="answer2"
                           class="form-input"
                           placeholder="{% trans 'Answer 2' %}"
                           required>
                </div>

                <div class="answer-row-flex">
                    <input type="radio" name="correct" value="3">
                    <input type="text"
                           name="answer3"
                           class="form-input"
                           placeholder="{% trans 'Answer 3' %}"
                           required>
                </div>

                <div class="answer-row-flex">
                    <input type="radio" name="correct" value="4">
                    <input type="text"
                           name="answer4"
                           class="form-input"
                           placeholder="{% trans 'Answer 4' %}"
                           required>
                </div>
            </div>

            <button type="submit"
                    name="action"
                    value="add"
                    class="btn-primary">
                {% trans "Add question" %}
            </button>

            <button type="submit"
                    name="action"
                    value="finish"
                    class="secondary-button"
                    formnovalidate
                    style="display:block; width:100%; padding:14px 18px; font-size:16px; border-radius:999px; text-align:center; margin-top:14px;">
                {% trans "Finish & preview" %}
            </button>
        </form>

    </div>
    <div class="phone__bottom"></div>
</div>
</body>
</html>
